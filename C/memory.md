<h1>MEMORY</h1>

C언어의 메모리는 stack과 heap, static data 영역(initialized data)과 text 영역으로 구분된다.

<h3>스택 Stack</h3>

LIFO (Last In First Out) 구조를 가진다

스택에 할당된 메모리들은 함수 호출이 종료되면 해제된다.

스택은 x86_64 아키텍쳐 리눅스 PC에서 약 8MB의 크기를 가진다.(아키텍쳐에 따라 달라진다)

스택의 크기가 8MB보다 크게 설정되면 스택 오버플로우 문제가 발생한다.

<h3>힙 Heap</h3>

힙은 더미로 직역된다. 힙은 메모리가 힙 영역에 아무렇게나 할당되어 있다.

힙의 특징

    1. 힙에 저장된 데이터는 함수 호출이 종료되어도 해제되지 않는다. 개발자가 명시적으로 해제하거나, 프로그램이 종료되어야 해제된다.
    2. 프로그램은 메모리 주소에 따라서 힙 데이터에 접근한다.
    3. 힙 공간은 크기의 제약이 없다. 메모리가 충분하다면, 힙 영역은 필요한 만큼 확장될 수 있다.

메모리 문제
    
    1. 사용이 종료된 데이터가 해제되지 않으면 프로그램이 종료될 때까지 메모리 공간을 차지한다.
    2. 프로그램은 힙에 데이터가 해제되었어도 메모리 주소에 따라서 접근할 수 있다.
    3. 힙 영역은 크기의 제한은 없지만 가용 메모리가 가득 찰 경우 OOM Killer 에 의해 프로그램이 종료될 수 있다.

보통 힙에 메모리 할당은 malloc, calloc, realloc 함수를 사용하고, 해제는 free 함수를 사용한다. 

메모리 누수를 피할 수 있는 두가지 규칙

1. 가능하다면 할당과 해제는 한 블럭에서
2. 메모리 할당과 해제가 한 블럭 이내에서 이뤄질 수 없다면 레퍼런스 카운터를 이용

malloc 과 free 를 한 블럭에서 하기

```c
#include <stdio.h>

int main(void){
    변수 선언 = malloc(크기) // 메모리 할당
    free(변수이름) // 메모리 해제
}
```
